"use strict";(self.webpackChunkkpiece=self.webpackChunkkpiece||[]).push([[367],{367:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var n=s(43),c=s(675),t=s(370),o=s(579);const r=()=>{var e;const{saga:a,selectedarc:s}=(0,c.g)(),[r,l]=(0,n.useState)([]),[i,m]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{try{const e=await fetch(`https://kpiece2.s3.eu-west-3.amazonaws.com/data/saga/${a}/${s}.json`);if(!e.ok)throw new Error("Erreur lors du fetch des scans");const n=await e.json();l(n.map((e=>({scan:e.scan,name:e.name,arc:e.arc,tome:e.tome,maxpages:e.maxpages,date:e.date,saga:e.saga}))))}catch(e){console.error("Erreur lors du fetch:",e)}finally{m(!1)}})()}),[a,s]),(0,n.useEffect)((()=>{fetch("https://kpiece2.s3.eu-west-3.amazonaws.com/data/saga.json").then((e=>e.json())).then((e=>{const n=e.find((e=>e.saganame===a));if(n&&n.arcssearch&&n.arcsname){const e=n.arcssearch.indexOf(s);e>=0&&l((a=>a.map((a=>({...a,arcName:n.arcsname[e]})))))}})).catch(console.error)}),[a,s]);const d=(null===(e=r[0])||void 0===e?void 0:e.arcName)||s,p=`https://kpiece2.s3.eu-west-3.amazonaws.com/img/arcs/${s}.webp`,h=r.length;return(0,o.jsx)(t.A,{componentName:d,componentImgLink:p,scanCounter:h,scans:r,loading:i,componentLink:""})}},370:(e,a,s)=>{s.d(a,{A:()=>o});var n=s(43),c=s(675),t=s(579);const o=e=>{let{componentName:a,componentLink:s,componentImgLink:o,scanCounter:r,scans:l}=e;const i=(0,c.Zp)(),[m,d]=(0,n.useState)(!0),[p,h]=(0,n.useState)(1),u=[...l].sort(((e,a)=>m?parseInt(e.scan)-parseInt(a.scan):parseInt(a.scan)-parseInt(e.scan))),g=Math.ceil(u.length/10),x=10*(p-1),j=u.slice(x,x+10);return(0,t.jsxs)("div",{className:"Selected-Component",children:[(0,t.jsxs)("div",{className:"Selected-Component-Header",children:[(0,t.jsx)("div",{className:"back-button",onClick:()=>i(-1),children:(0,t.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,t.jsxs)("div",{className:"Selected-Component-card",onClick:()=>i(s||"#"),style:{cursor:s?"pointer":"default"},children:[(0,t.jsx)("img",{src:o,alt:a,className:"Selected-Component-image"}),(0,t.jsx)("h2",{className:"Selected-Component-h2",children:a})]}),(0,t.jsxs)("div",{className:"Selected-Component-Counter",children:[r," Chapitres "]})]}),(0,t.jsx)("div",{className:"sort-button",children:(0,t.jsx)("button",{onClick:()=>d(!m),children:(0,t.jsx)("i",{className:"fa-solid fa-angles-up "+(m?"":"rotated")})})}),(0,t.jsx)("div",{className:"Selected-Component-List-Scan",children:j.map(((e,a)=>(0,t.jsxs)("div",{className:"Selected-Component-Scan",children:[(0,t.jsxs)("h3",{children:[" Chapitre ",e.scan]}),(0,t.jsx)("p",{className:"Selected-Component-Scan-Name",children:e.name}),(0,t.jsx)("p",{style:{backgroundImage:`linear-gradient(45deg, ${e.color1}, ${e.color2})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},className:"Selected-Component-Scan-Arc",children:e.arcName}),(0,t.jsxs)("p",{className:"Selected-Component-Scan-Date",children:["- ",e.date]}),(0,t.jsx)("button",{onClick:()=>(e=>{i(`/scan/${e.saga}/${e.arc}/${e.scan}/01`)})(e),className:"read-scan-button",children:"Lire"})]},a)))}),g>1&&(0,t.jsx)("div",{className:"pagination-container",children:[...Array(g)].map(((e,a)=>(0,t.jsx)("button",{className:p===a+1?"active-page":"",onClick:()=>h(a+1),children:a+1},a)))})]})}}}]);
//# sourceMappingURL=367.8c95fe67.chunk.js.map