"use strict";(self.webpackChunkkpiece=self.webpackChunkkpiece||[]).push([[940],{370:(e,a,s)=>{s.d(a,{A:()=>o});var t=s(43),c=s(675),n=s(579);const o=e=>{let{componentName:a,componentLink:s,componentImgLink:o,scanCounter:r,scans:l}=e;const i=(0,c.Zp)(),[m,d]=(0,t.useState)(!0),[p,u]=(0,t.useState)(1),h=[...l].sort(((e,a)=>m?parseInt(e.scan)-parseInt(a.scan):parseInt(a.scan)-parseInt(e.scan))),j=Math.ceil(h.length/10),C=10*(p-1),k=h.slice(C,C+10);return(0,n.jsxs)("div",{className:"Selected-Component",children:[(0,n.jsxs)("div",{className:"Selected-Component-Header",children:[(0,n.jsx)("div",{className:"back-button",onClick:()=>i(-1),children:(0,n.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,n.jsxs)("div",{className:"Selected-Component-card",onClick:()=>i(s||"#"),style:{cursor:s?"pointer":"default"},children:[(0,n.jsx)("img",{src:o,alt:a,className:"Selected-Component-image"}),(0,n.jsx)("h2",{className:"Selected-Component-h2",children:a})]}),(0,n.jsxs)("div",{className:"Selected-Component-Counter",children:[r," Chapitres "]})]}),(0,n.jsx)("div",{className:"sort-button",children:(0,n.jsx)("button",{onClick:()=>d(!m),children:(0,n.jsx)("i",{className:"fa-solid fa-angles-up "+(m?"":"rotated")})})}),(0,n.jsx)("div",{className:"Selected-Component-List-Scan",children:k.map(((e,a)=>(0,n.jsxs)("div",{className:"Selected-Component-Scan",children:[(0,n.jsxs)("h3",{children:[" Chapitre ",e.scan]}),(0,n.jsx)("p",{className:"Selected-Component-Scan-Name",children:e.name}),(0,n.jsx)("p",{style:{backgroundImage:`linear-gradient(45deg, ${e.color1}, ${e.color2})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},className:"Selected-Component-Scan-Arc",children:e.arcName}),(0,n.jsxs)("p",{className:"Selected-Component-Scan-Date",children:["- ",e.date]}),(0,n.jsx)("button",{onClick:()=>(e=>{i(`/scan/${e.saga}/${e.arc}/${e.scan}/01`)})(e),className:"read-scan-button",children:"Lire"})]},a)))}),j>1&&(0,n.jsx)("div",{className:"pagination-container",children:[...Array(j)].map(((e,a)=>(0,n.jsx)("button",{className:p===a+1?"active-page":"",onClick:()=>u(a+1),children:a+1},a)))})]})}},940:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(43),c=s(675),n=s(370),o=s(579);const r=()=>{const{tomelist:e,tomenumber:a}=(0,c.g)(),[s,r]=(0,t.useState)(null),[l,i]=(0,t.useState)([]),[m,d]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{const s=async e=>{let a=[];const s=Array.isArray(e.saga)?e.saga:[e.saga],t=Array.isArray(e.arc)?e.arc:[e.arc];for(let n of s)for(let s of t)try{const t=`https://kpiece2.s3.eu-west-3.amazonaws.com/data/saga/${n}/${s}.json`,c=await fetch(t);if(c.ok){const s=(await c.json()).filter((a=>a.scan>=e.firstscan&&a.scan<=e.lastscan));a=[...a,...s]}}catch(c){console.error(`Erreur lors du chargement des scans pour ${s}:`,c)}try{const e=await fetch("https://kpiece2.s3.eu-west-3.amazonaws.com/data/arccolor.json");if(e.ok){const s=await e.json(),t=a.map((e=>{const a=s.find((a=>a.arc.toLowerCase()===e.arc.toLowerCase()));return a?{...e,color1:"#"+a.color[0],color2:"#"+a.color[1],arcName:a.arcName}:e}));i(t)}else i(a)}catch(c){console.error("Erreur lors du chargement des couleurs d'arcs:",c),i(a)}d(!1)};(async()=>{try{const t=`https://kpiece2.s3.eu-west-3.amazonaws.com/data/tomes/${e}.json`,c=await fetch(t),n=(await c.json()).find((e=>e.tome===parseInt(a)));n?(r(n),s(n)):d(!1)}catch(t){console.error("Erreur lors du chargement du tome:",t),d(!1)}})()}),[e,a]),m?(0,o.jsx)("div",{children:"Chargement..."}):s?(0,o.jsx)("div",{className:"Tome-Page",children:(0,o.jsx)(n.A,{componentName:`Tome ${a}`,componentImgLink:`https://kpiece2.s3.eu-west-3.amazonaws.com/img/tomes/${e}/${a}.webp`,scanCounter:s.lastscan-s.firstscan,scans:l,componentLink:`/tomes/${e}/${a}/01`})}):(0,o.jsx)("div",{children:"Aucun tome trouv\xe9."})}}}]);
//# sourceMappingURL=940.9a1ac7a4.chunk.js.map